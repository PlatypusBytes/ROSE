(function(e){function t(t){for(var a,s,u=t[0],o=t[1],l=t[2],p=0,d=[];p<u.length;p++)s=u[p],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);c&&c(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,u=1;u<n.length;u++){var o=n[u];0!==r[o]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},i=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],o=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var c=o;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0acf":function(e,t,n){"use strict";n("546a")},"2dac":function(e,t,n){},3151:function(e,t,n){},"546a":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=n("ed09");a["a"].use(r["b"]);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"white",height:"72px","clipped-left":""}},[n("v-toolbar-title",[e._v("ROSE ")]),n("v-spacer"),n("v-stepper",{attrs:{flat:"",width:"80%",height:"100%"},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}},[n("v-stepper-header",[n("v-stepper-step",{attrs:{complete:e.page>1,step:"1"}},[e._v(" Input data ")]),n("v-divider"),n("v-stepper-step",{attrs:{complete:e.page>2,step:"2"}},[e._v(" Results ")])],1)],1)],1),2===e.page?n("v-navigation-drawer",{attrs:{clipped:"",app:"",permanent:"",width:"400"}},[n("app-side-bar")],1):e._e(),n("v-main",{attrs:{app:""}},[n("v-stepper",{staticClass:"pa-0",attrs:{flat:""},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}},[n("v-stepper-items",[n("v-stepper-content",{attrs:{step:"1"}},[n("input-data-card",{on:{"go-to-results":e.onShowResultsPage}})],1),n("v-stepper-content",{staticClass:"pa-0",attrs:{step:"2"}},[n("v-card",{staticClass:"pa-0",attrs:{height:"92vh"}},[n("mapbox-map",{attrs:{"access-token":e.accessToken}},[e.mapLayer?n("div",{key:e.mapLayer.id},[n("map-layer",{attrs:{options:e.mapLayer}}),"settlement"===e.selectedLayerType?n("map-controls",{attrs:{layer:e.mapLayer}}):e._e(),e.showLegend?n("map-legend",{attrs:{items:e.legend,title:e.legendTitle}}):e._e()],1):e._e()]),n("chart-dialog")],1)],1)],1)],1)],1)],1)},s=[],u=n("5530"),o=n("80ec"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-card",{staticClass:"mx-auto my-12",attrs:{"max-width":"374",height:"500"}},[n("v-card-title",[e._v(" Input Data ")]),n("v-card-text",[n("v-file-input",{attrs:{label:"Import SOS segments",hint:"Compulsory","prepend-icon":"",required:""},on:{change:e.onSOSinput}}),n("v-file-input",{attrs:{label:"Import Sensar (Optional)","prepend-icon":"",hint:"Optional"},on:{change:e.onSensarInput}}),n("v-file-input",{attrs:{label:"Import Rila (Optional)","prepend-icon":"",hint:"Optional"},on:{change:e.onRilaInput}}),n("v-file-input",{attrs:{label:"Import InfraMon (Optional)","prepend-icon":"",hint:"Optional"},on:{change:e.onInfraMonInput}})],1),n("v-card-actions",[n("v-container",[n("v-row",{attrs:{dense:""}},[n("div",{staticClass:"flex-grow-1"}),n("v-btn",{attrs:{color:"primary",disabled:e.disableRun},on:{click:e.run}},[e._v(" RUN ")])],1),e.warningMessage?n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-alert",{attrs:{type:"error"}},[e._v(" "+e._s(e.warningMessage)+" ")])],1)],1):e._e()],1)],1)],1)],1)},c=[],p=n("2f62"),d={data:function(){return{warningMessage:null}},computed:Object(u["a"])(Object(u["a"])({},Object(p["c"])("inputs",["runnerInput","inputValid","message","running"])),{},{disableRun:function(){return!this.runnerInput}}),watch:{inputValid:function(){this.showErrorMessage(),this.goToResultsPage()},running:function(){this.showRunningMessage()}},methods:Object(u["a"])(Object(u["a"])({},Object(p["b"])("inputs",["setSosSegmentInput","setSensarInput","setRilaInput","setInfraMonInput","startRunner"])),{},{onSOSinput:function(e){this.setSosSegmentInput(e)},onSensarInput:function(e){this.setSensarInput(e)},onRilaInput:function(e){this.setRilaInput(e)},onInfraMonInput:function(e){this.setInfraMonInput(e)},run:function(){this.startRunner()},goToResultsPage:function(){var e=this.inputValid,t=this.running;e&&!0===e&&!1===t&&this.$emit("go-to-results",2)},showErrorMessage:function(){var e=this.inputValid;!1===e&&(this.warningMessage=this.message)},showRunningMessage:function(){var e=this.running;!0===e&&(this.warningMessage=this.message)}})},m=d,f=n("2877"),h=n("6544"),v=n.n(h),y=n("0798"),T=n("8336"),g=n("b0af"),b=n("99d9"),_=n("62ad"),S=n("a523"),x=n("23a7"),I=n("0fd9"),O=Object(f["a"])(m,l,c,!1,null,null,null),V=O.exports;v()(O,{VAlert:y["a"],VBtn:T["a"],VCard:g["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VCol:_["a"],VContainer:S["a"],VFileInput:x["a"],VRow:I["a"]});var E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pa-4 home d-flex flex-column"},[n("v-expansion-panels",{staticClass:"mb-4",model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[n("content-panels",{attrs:{id:"dyn_stiffness",title:"Dynamic Stiffness"}},[n("train-type-list",{attrs:{slot:"trainTypes","train-types":e.trainTypes},on:{"set-train-type":e.setTrainType},slot:"trainTypes"}),n("value-type-selection",{attrs:{slot:"valueTypes","value-types":e.availableValueTypes},on:{"set-value-type":e.setValueType},slot:"valueTypes"})],1),n("content-panels",{attrs:{id:"settlement",title:"Settlement"}},[n("time-slider",{attrs:{slot:"slider","time-indexes":e.timeIndexes},on:{"set-time-index":e.setTimeIndex},slot:"slider"}),n("value-type-selection",{attrs:{slot:"valueTypes","value-types":e.availableValueTypes},on:{"set-value-type":e.setValueType},slot:"valueTypes"})],1)],1)],1)},j=[],C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-expansion-panel",[n("v-expansion-panel-header",{staticClass:"font-weight-bold px-4",on:{transitionend:function(t){return e.onTransitionEnd(t)}}},[e._v(" "+e._s(e.title)+" ")]),n("v-divider"),n("v-expansion-panel-content",{ref:"layerType-"+e.id,staticClass:"mx-n6"},[e._t("slider"),e._t("trainTypes"),e._t("valueTypes")],2)],1)},w=[],L={props:{title:{type:String,required:!0,default:""},id:{type:String,required:!0,defaut:""}},data:function(){return{panelRef:null,layerType:null}},watch:{panelRef:function(){var e=this.panelRef.isActive;e&&this.setLayerType(this.id)}},mounted:function(){this.panelRef=this.$refs["layerType-".concat(this.id)]},methods:Object(u["a"])(Object(u["a"])({},Object(p["b"])("layers",["setLayerType"])),{},{onTransitionEnd:function(e){var t=this.panelRef.isActive,n=e.propertyName;"min-height"!==n&&t&&this.setLayerType(this.id)}})},R=L,M=n("ce7e"),A=n("cd55"),N=n("49e2"),k=n("c865"),P=Object(f["a"])(R,C,w,!1,null,null,null),D=P.exports;v()(P,{VDivider:M["a"],VExpansionPanel:A["a"],VExpansionPanelContent:N["a"],VExpansionPanelHeader:k["a"]});var U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-radio-group",{staticClass:"pa-4",model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}},e._l(e.valueTypes,(function(e){return n("v-radio",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)},$=[],F={props:{valueTypes:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{selectedType:this.valueTypes[0].id}},watch:{selectedType:function(){this.setSelectedType()}},mounted:function(){this.setSelectedType()},methods:{setSelectedType:function(){this.$emit("set-value-type",this.selectedType)}}},J=F,Y=n("67b6"),G=n("43a6"),q=Object(f["a"])(J,U,$,!1,null,null,null),H=q.exports;v()(q,{VRadio:Y["a"],VRadioGroup:G["a"]});var z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pa-4"},[n("div",{staticClass:"text-body-1 pb-3"},[e._v(" Train type: ")]),n("v-select",{attrs:{items:e.trainTypes,outlined:"",desnse:""},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}})],1)},B=[],W={props:{trainTypes:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{selectedType:null}},watch:{selectedType:function(){this.setTrainType()}},mounted:function(){this.selectedType=this.trainTypes[0]},destroyed:function(){this.setTrainType(null)},methods:{setTrainType:function(){this.$emit("set-train-type",this.selectedType)}}},X=W,Z=n("b974"),K=Object(f["a"])(X,z,B,!1,null,null,null),Q=K.exports;v()(K,{VSelect:Z["a"]});var ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pa-4  mt-5"},[n("div",{staticClass:"text-body-1 pb-3"},[e._v(" Time: ")]),n("v-slider",{attrs:{"thumb-label":!0,min:e.timeIndexes[0],max:e.timeIndexes[e.timeIndexes.length-1]},on:{end:e.setTimeIndex},model:{value:e.selectedIndex,callback:function(t){e.selectedIndex=t},expression:"selectedIndex"}})],1)},te=[],ne={props:{timeIndexes:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{selectedIndex:null}},mounted:function(){this.selectedIndex=this.timeIndexes[0]},methods:{setTimeIndex:function(){this.$emit("set-time-index",this.selectedIndex)}}},ae=ne,re=n("ba0d"),ie=Object(f["a"])(ae,ee,te,!1,null,null,null),se=ie.exports;v()(ie,{VSlider:re["a"]});var ue={components:{ContentPanels:D,TrainTypeList:Q,TimeSlider:se,ValueTypeSelection:H},data:function(){return{panel:0}},computed:Object(u["a"])(Object(u["a"])({},Object(p["d"])("layers",["availableValueTypes"])),Object(p["c"])("layers",["timeIndexes","trainTypes","params"])),watch:{params:{handler:function(){this.getFeaturesCollection()}}},methods:Object(u["a"])({},Object(p["b"])("layers",["setTrainType","setTimeIndex","setValueType","getFeaturesCollection"]))},oe=ue,le=n("0393"),ce=Object(f["a"])(oe,E,j,!1,null,null,null),pe=ce.exports;v()(ce,{VExpansionPanels:le["a"]});var de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},me=[],fe=(n("d81d"),{inject:["getMap"],props:{layer:{type:Object,default:null}},data:function(){return{map:null}},watch:{map:{handler:function(e){e&&this.addEventsToMap()}}},mounted:function(){var e=this.getMap();e&&(this.map=e)},beforeDestroy:function(){this.removeEventsFromMap()},methods:Object(u["a"])(Object(u["a"])({},Object(p["b"])("charts",["setChartData"])),{},{deferredMountedTo:function(e){this.layer&&(this.map=e)},onClick:function(e){var t=e.features[0].properties.segmentId;this.setChartData(t)},onMouseEnter:function(){this.map.getCanvas().style.cursor="pointer"},onMouseLeave:function(){this.map.getCanvas().style.cursor=""},addEventsToMap:function(){this.map.on("click",this.layer.id,this.onClick),this.map.on("mouseenter",this.layer.id,this.onMouseEnter),this.map.on("mouseleave",this.layer.id,this.onMouseLeave)},removeEventsFromMap:function(){this.map.off("click",this.layer.id,this.onClick),this.map.off("mouseenter",this.layer.id,this.onMouseEnter),this.map.off("mouseleave",this.layer.id,this.onMouseLeave)}})}),he=fe,ve=Object(f["a"])(he,de,me,!1,null,null,null),ye=ve.exports,Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{staticClass:"chart-dialog",attrs:{value:e.openChartDialog,"max-width":"750"},on:{"click:outside":e.onClickClose}},[n("v-card",[n("v-app-bar",{attrs:{flat:"",color:"white"}},[n("v-btn",{attrs:{icon:""},on:{click:e.onClickClose}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("v-divider"),e.hasDataToDisplayInCharts?n("v-card-text",[n("div",{staticClass:"app-chart"},[n("div",{staticClass:"app-chart__canvas"},[n("std-chart",{attrs:{"mean-values":e.meanValues,"min-values":e.minValues,"max-values":e.maxValues,time:e.time}})],1)])]):e._e()],1)],1)},ge=[],be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-chart",{staticClass:"line-chart",attrs:{"init-options":e.initOptions,option:e.options,autoresize:""}})},_e=[],Se=n("22b4"),xe=n("f95e"),Ie=n("3620"),Oe=n("4b2a"),Ve=n("9394"),Ee=n("2da7"),je=n("5c7f");Object(Se["a"])([xe["a"],Oe["a"],Ie["a"],Ve["a"],Ee["a"]]);var Ce={name:"StdChart",components:{VChart:je["a"]},props:{meanValues:{type:Array,required:!0,default:function(){return[]}},minValues:{type:Array,required:!0,default:function(){return[]}},maxValues:{type:Array,required:!0,default:function(){return[]}},time:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{initOptions:{height:"400px"},baseOptions:{backgroundColor:"rgb(243, 243, 243)",tooltip:{trigger:"axis"}}}},computed:{options:function(){return Object(u["a"])(Object(u["a"])({},this.baseOptions),{},{xAxis:this.xAxis,yAxis:this.yAxis,series:this.series})},xAxis:function(){return{type:"category",name:"Time [d]",nameLocation:"middle",nameGap:30,data:this.time}},yAxis:function(){return{splitLine:{show:!1},type:"value",name:"Vertical displacement [mm]",nameLocation:"middle",nameGap:30,splitNumber:8}},series:function(){return[this.maxSeries,this.meanSeries,this.minSeries]},maxSeries:function(){return{name:"max",type:"line",lineStyle:{type:"dotted",opacity:1},areaStyle:{},symbol:"none",data:this.maxValues}},meanSeries:function(){return{name:"mean",type:"line",itemStyle:{color:"#333"},showSymbol:!1,data:this.meanValues}},minSeries:function(){return{name:"min",type:"line",lineStyle:{type:"dotted",opacity:1},areaStyle:{color:"rgb(243, 243, 243)",opacity:1},symbol:"none",data:this.minValues}}}},we=Ce,Le=Object(f["a"])(we,be,_e,!1,null,null,null),Re=Le.exports,Me={components:{StdChart:Re},computed:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(p["c"])("charts",["minValues","maxValues","meanValues","time"])),Object(p["d"])("charts",["openChartDialog"])),{},{hasDataToDisplayInCharts:function(){return!!(this.minValues.length&&this.maxValues.length&&this.meanValues.length&&this.time.length)}}),methods:Object(u["a"])(Object(u["a"])({},Object(p["b"])("charts",["setOpenChartDialog"])),{},{onClickClose:function(){this.setOpenChartDialog(!1)}})},Ae=Me,Ne=n("40dc"),ke=n("169a"),Pe=n("132d"),De=Object(f["a"])(Ae,Te,ge,!1,null,null,null),Ue=De.exports;v()(De,{VAppBar:Ne["a"],VBtn:T["a"],VCard:g["a"],VCardText:b["b"],VDialog:ke["a"],VDivider:M["a"],VIcon:Pe["a"]});var $e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"map-legend",attrs:{flat:""}},[n("v-card-title",[e._v(" "+e._s(e.title)+" ")]),n("v-card-text",[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",e._l(e.items,(function(t,a){return n("v-list-item",{key:a},[n("v-list-item-icon",[n("v-sheet",{attrs:{color:t.color,height:"24",rounded:"",width:"24"}})],1),n("v-list-item-content",[n("span",{staticClass:"text-body-2"},[e._v(" "+e._s(t.label)+" ")])])],1)})),1)],1)],1)],1)},Fe=[],Je={props:{items:{type:Array,default:function(){return[]}},title:{type:String,default:""}}},Ye=Je,Ge=(n("67e9"),n("8860")),qe=n("da13"),He=n("5d23"),ze=n("1baa"),Be=n("34c3"),We=n("8dd9"),Xe=Object(f["a"])(Ye,$e,Fe,!1,null,null,null),Ze=Xe.exports;v()(Xe,{VCard:g["a"],VCardText:b["b"],VCardTitle:b["c"],VList:Ge["a"],VListItem:qe["a"],VListItemContent:He["a"],VListItemGroup:ze["a"],VListItemIcon:Be["a"],VSheet:We["a"]});var Ke={name:"v-mapbox-layer",inject:["getMap"],render:function(){return null},props:{options:{default:function(){return{}},type:[Object,String]}},data:function(){return{isInitialized:!1}},mounted:function(){this.getMap()&&(this.rerender(),this.isInitialized=!0)},destroyed:function(){this.removeLayer()},methods:{deferredMountedTo:function(){this.isInitialized||(this.rerender(),this.isInitialized=!0)},removeLayer:function(){var e=this.getMap();if(e){var t=e.getLayer(this.options.id);if(t){e.removeLayer(this.options.id);try{e.removeSource(t.source)}catch(n){console.warn("could not remove source",t.source)}}}},addLayer:function(){var e=this.getMap();this.before&&e.getLayer(this.before)?e.addLayer(this.options,this.before):e.addLayer(this.options)},rerender:function(){this.removeLayer(),this.addLayer()}}},Qe={components:{MapboxMap:o["a"],InputDataCard:V,AppSideBar:pe,MapControls:ye,ChartDialog:Ue,MapLegend:Ze,MapLayer:Ke},data:function(){return{accessToken:"pk.eyJ1IjoiaW9taWMiLCJhIjoiY2thZ3g5NDJvMGF4eDJzcWI3NnpraTlybCJ9.2NLC1oDwtP6lBWIsAfEu1A",page:1,layers:[]}},computed:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(p["d"])("layers",["mapLayer","selectedLayerType"])),Object(p["c"])("layers",["legend","legendTitle"])),{},{showLegend:function(){return this.legend.length}}),methods:{onShowResultsPage:function(e){this.page=e}}},et=Qe,tt=(n("0acf"),n("7496")),nt=n("f6c4"),at=n("f774"),rt=n("2fa4"),it=n("7e85"),st=n("e516"),ut=n("9c54"),ot=n("56a4"),lt=n("2a7f"),ct=Object(f["a"])(et,i,s,!1,null,"14419029",null),pt=ct.exports;v()(ct,{VApp:tt["a"],VAppBar:Ne["a"],VCard:g["a"],VDivider:M["a"],VMain:nt["a"],VNavigationDrawer:at["a"],VSpacer:rt["a"],VStepper:it["a"],VStepperContent:st["a"],VStepperHeader:ut["a"],VStepperItems:ut["b"],VStepperStep:ot["a"],VToolbarTitle:lt["a"]});var dt=n("1da1"),mt=(n("96cf"),n("159b"),n("d3b7"),n("25f0"),n("07ac"),n("53ca")),ft=n("bc3a"),ht=n.n(ft),vt=function(e){return ht()({method:"get",url:"".concat("http://localhost:5000","/settlement"),params:e}).then((function(e){var t=e.data;return"object"===Object(mt["a"])(t)?t:JSON.parse(t)}))},yt=function(e){return ht()({method:"get",url:"".concat("http://localhost:5000","/dynamic_stiffness"),params:e}).then((function(e){var t=e.data;return"object"===Object(mt["a"])(t)?t:JSON.parse(t)}))},Tt=n("2909"),gt=(n("99af"),function(e,t){var n=[];return e.forEach((function(e,a){n=[].concat(Object(Tt["a"])(n),[e,t[a]])})),n.push("#000066"),{"line-width":3,"line-color":["step",["get","value"]].concat(Object(Tt["a"])(n))}}),bt=function(e,t,n,a){return{id:e,type:"line",source:{type:"geojson",data:t},paint:gt(n,a)}},_t=function(e,t,n,a){return"settlement"===e?{time_index:t,value_type:"cumulative_settlement_".concat(a)}:"dyn_stiffness"===e?{train_type:n,value_type:"".concat(a,"_dyn_stiffness")}:null},St=function(e,t,n,a){return n?"settlement"===e?"".concat(t,"_").concat(a):"".concat(t,"_").concat(n):null},xt={namespaced:!0,state:function(){return{selectedTrainType:null,selectedTimeIndex:0,selectedValueType:null,availableValueTypes:[{title:"Mean",id:"mean"},{title:"Standard deviation",id:"std"}],selectedLayerType:null,mapLayer:null}},getters:{trainTypes:function(e,t,n){var a=n.inputs.runnerOutput;return a?a.data.all_train_types:[]},colors:function(e,t,n){var a=n.inputs.runnerOutput;return a?a.data.colours:[]},cummulativeSetLimits:function(e,t,n){var a=n.inputs.runnerOutput;if(!a)return[];var r=e.selectedTimeIndex;return a.data.cumulative_sett_limits[r]},cummulativeSetStdLimits:function(e,t,n){var a=n.inputs.runnerOutput;if(!a)return[];var r=e.selectedTimeIndex;return a.data.cumulative_sett_std_limits[r]},dynamicStiffnessLimits:function(e,t,n){var a=n.inputs.runnerOutput;return a?a.data.dyn_stiff_limits:[]},dynamicStiffnessStdLimits:function(e,t,n){var a=n.inputs.runnerOutput;return a?a.data.dyn_stiff_std_limits:[]},legend:function(e,t){var n=e.selectedLayerType,a=e.selectedValueType,r=t.cummulativeSetLimits,i=t.cummulativeSetStdLimits,s=t.dynamicStiffnessLimits,u=t.dynamicStiffnessStdLimits,o=t.colors,l=[],c=[];return c="settlement"===n?"mean"===a?r:i:"mean"===a?s:u,o.forEach((function(e,t){l.push({color:e,label:c[t].toString()})})),l},legendTitle:function(e){var t=e.selectedLayerType,n=e.selectedValueType,a="";return a="settlement"===t?"mean"===n?"Mean settlement [mm]":"Std settlement [mm]":"mean"===n?"Mean dynamic stiffness [kN/m]":"Std dynamic stiffness [kN/m]",a},timeIndexes:function(e,t,n){var a=n.inputs.runnerOutput;return a?a.data.time:[]},layerId:function(e){var t=e.selectedLayerType,n=e.selectedValueType,a=e.selectedTrainType,r=e.selectedTimeIndex;return St(t,n,a,r)},params:function(e){var t=e.selectedLayerType,n=e.selectedTimeIndex,a=e.selectedTrainType,r=e.selectedValueType;return _t(t,n,a,r)}},actions:{setTrainType:function(e,t){e.commit("SET_TRAIN_TYPE",t)},setTimeIndex:function(e,t){e.commit("SET_TIME_INDEX",t)},setValueType:function(e,t){e.commit("SET_VALUE_TYPE",t)},setLayerType:function(e,t){e.commit("SET_LAYER_TYPE",t)},getFeaturesCollection:function(e){return Object(dt["a"])(regeneratorRuntime.mark((function t(){var n,a,r,i,s,u,o,l,c,p,d,m,f,h,v,y,T;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state,a=n.selectedLayerType,r=n.selectedValueType,i=e.getters,s=i.params,u=i.colors,o=i.cummulativeSetLimits,l=i.dynamicStiffnessLimits,c=i.cummulativeSetStdLimits,p=i.dynamicStiffnessStdLimits,d=Object.values(s).some((function(e){return null===e})),!d){t.next=5;break}return t.abrupt("return");case 5:if(!a||"settlement"!==a){t.next=14;break}return t.next=8,vt(s);case 8:m=t.sent,f=e.getters.layerId,h=bt(f,m,u,"mean"===r?o:c),e.commit("SET_MAP_LAYER",h),t.next=20;break;case 14:return t.next=16,yt(s);case 16:v=t.sent,y=e.getters.layerId,T=bt(y,v,u,"mean"===r?l:p),e.commit("SET_MAP_LAYER",T);case 20:case"end":return t.stop()}}),t)})))()}},mutations:{SET_TRAIN_TYPE:function(e,t){e.selectedTrainType=t},SET_TIME_INDEX:function(e,t){e.selectedTimeIndex=t},SET_VALUE_TYPE:function(e,t){e.selectedValueType=t},SET_LAYER_TYPE:function(e,t){e.selectedLayerType=t},SET_MAP_LAYER:function(e,t){e.mapLayer=t}}},It=function(e){return ht()({method:"post",url:"".concat("http://localhost:5000","/runner"),data:e,headers:{"Content-Type":"application/json; charset=UTF-8'","Access-Control-Allow-Origin":"*"}}).then((function(e){var t=e.data;return"object"===Object(mt["a"])(t)?t:JSON.parse(t)}))};function Ot(e){return new Promise((function(t){var n=new FileReader;n.addEventListener("load",(function(e){t(JSON.parse(e.target.result))})),n.readAsText(e)}))}var Vt={namespaced:!0,state:function(){return{runnerOutput:null,sosSegmentsInput:null,sensarInput:null,rilaInput:null,infraMonInput:null}},getters:{runnerInput:function(e){var t=e.sosSegmentsInput,n=e.sensarInput,a=e.rilaInput,r=e.infraMonInput;if(t)return{SOS_Segment_Input:t,Sensar_Input:n,Rila_Input:a,InfraMon_Input:r}},dataExist:function(e){var t=e.runnerOutput;return t?t.exist:null},inputValid:function(e){var t=e.runnerOutput;return t?t.valid:null},exist:function(e){var t=e.runnerOutput;return t?t.exist:null},running:function(e){var t=e.runnerOutput;return t?t.running:null},message:function(e){var t=e.runnerOutput;if(!t)return null;var n=e.inputValid,a=e.exist;return!0===n&&!1===a?"Started running":t.message}},actions:{startRunner:function(e){return Object(dt["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.getters.runnerInput,t.next=3,It(n);case 3:a=t.sent,e.commit("SET_RUNNER_OUTPUT",a);case 5:case"end":return t.stop()}}),t)})))()},setSosSegmentInput:function(e,t){return Object(dt["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=7;break}return n.next=3,Ot(t);case 3:a=n.sent,e.commit("SET_SOS_SEGMENT_INPUT",a),n.next=8;break;case 7:e.commit("SET_SOS_SEGMENT_INPUT",null);case 8:case"end":return n.stop()}}),n)})))()},setSensarInput:function(e,t){return Object(dt["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=7;break}return n.next=3,Ot(t);case 3:a=n.sent,e.commit("SET_SENSAR_INPUT",a),n.next=8;break;case 7:e.commit("SET_SENSAR_INPUT",null);case 8:case"end":return n.stop()}}),n)})))()},setRilaInput:function(e,t){return Object(dt["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=7;break}return n.next=3,Ot(t);case 3:a=n.sent,e.commit("SET_RILA_INPUT",a),n.next=8;break;case 7:e.commit("SET_RILA_INPUT",null);case 8:case"end":return n.stop()}}),n)})))()},setInfraMonInput:function(e,t){return Object(dt["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=7;break}return n.next=3,Ot(t);case 3:a=n.sent,e.commit("SET_INFRA_MON_INPUT",a),n.next=8;break;case 7:e.commit("SET_INFRA_MON_INPUT",null);case 8:case"end":return n.stop()}}),n)})))()}},mutations:{SET_RUNNER_OUTPUT:function(e,t){e.runnerOutput=t},SET_SOS_SEGMENT_INPUT:function(e,t){e.sosSegmentsInput=t},SET_SENSAR_INPUT:function(e,t){e.sensarInput=t},SET_RILA_INPUT:function(e,t){e.rilaInput=t},SET_INFRA_MON_INPUT:function(e,t){e.infraMonInput=t}}},Et=function(e){if(e)return ht()({method:"get",url:"".concat("http://localhost:5000","/graph_values?segment_id=").concat(e)}).then((function(e){var t=e.data;return"object"===Object(mt["a"])(t)?t:JSON.parse(t)}))},jt=function(e,t){if(!e||!t)return[];var n=e.map((function(e,n){var a=e-t[n];return a}));return n},Ct=function(e,t){if(!e||!t)return[];var n=e.map((function(e,n){var a=e+t[n];return a}));return n},wt={namespaced:!0,state:function(){return{chartData:null,openChartDialog:!1}},getters:{meanValues:function(e){var t=e.chartData;return t?t.cumulative_settlement_mean:[]},stdValues:function(e){var t=e.chartData;return t?t.cumulative_settlement_std:[]},time:function(e){var t=e.chartData;return t?t.time:[]},minValues:function(e,t){var n=t.meanValues,a=t.stdValues;return jt(n,a)},maxValues:function(e,t){var n=t.meanValues,a=t.stdValues;return Ct(n,a)}},actions:{setChartData:function(e,t){return Object(dt["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Et(t);case 2:a=n.sent,e.commit("SET_CHART_DATA",a),e.commit("SET_OPEN_CHART_DIALOG",!0);case 5:case"end":return n.stop()}}),n)})))()},setOpenChartDialog:function(e,t){e.commit("SET_OPEN_CHART_DIALOG",t)}},mutations:{SET_CHART_DATA:function(e,t){e.chartData=t},SET_OPEN_CHART_DIALOG:function(e,t){e.openChartDialog=t}}};a["a"].use(p["a"]);var Lt=new p["a"].Store({actions:{},modules:{layers:xt,inputs:Vt,charts:wt}}),Rt=n("f309");a["a"].use(Rt["a"]);var Mt=new Rt["a"]({});n("3151");a["a"].config.productionTip=!1,new a["a"]({store:Lt,vuetify:Mt,render:function(e){return e(pt)}}).$mount("#app")},"67e9":function(e,t,n){"use strict";n("2dac")}});
//# sourceMappingURL=app.9118ada5.js.map